# 福祉国家試験対策シリーズ "Welfare Master" 総合仕様書 (Ver 2.0)

## 1. プロジェクト概要
*   **製品名**:
    *   App 1: 「社会福祉士 2026 - Welfare Master」
    *   App 2: 「精神保健福祉士 2026 - Welfare Master」
    *   App 3: 「介護福祉士 2026 - Welfare Master」
*   **ターゲット**: ITリテラシーが高くない30代〜50代の受験生。
*   **コンセプト**: 「スマホの中に、最強の家庭教師と本棚を。」
*   **コアバリュー**:
    *   **Simple**: 設定不要、買った瞬間から使える。
    *   **Clean**: 著作権クリア済み、かつAIによるわかりやすい解説。
    *   **Personal**: 保有資格をステータス化し、学習意欲を刺激。

## 2. システムアーキテクチャ (One Codebase, Multi Apps)
たった一つのソースコードで、3つのアプリを出し分ける「フレーバー（Flavor）」構成を採用します。

### 0. プロジェクト構造と「Single Source of Truth」
混乱を防ぐため、プロジェクトのディレクトリ運用を以下のように厳格化します。

*   `welfare-master/` (✨ **Active**)
    *   本プロジェクトの唯一の正本（Single Source of Truth）。
    *   全ての開発（Expoアプリ、Pythonデータパイプライン、ドキュメント更新）は**必ずここで行う**。
    *   外部フォルダへの依存を持ってはならない。
*   `__ARCHIVE__social-welfare-app/` (🔒 **Archived**)
    *   **閲覧専用**。旧バージョンのTauri版アプリなどが入っている。
    *   いかなる理由があっても**編集・更新してはならない**。
    *   必要なアセットがある場合のみ、ここから `welfare-master` へコピーして使用する。

### Data Pipeline (Python)
1.  **Raw Data**: 3858問の生データ + 介護データ
2.  **Knowledge Launderer**: データをクレンジング・正規化し、著作権クリア済みの MasterDB (JSON) を生成。
3.  **Filtering**: MasterDBから各アプリ用 (social.db, mental.db, care.db) を生成。

### React Native Project (Expo)
*   **Code**: 共通ソースコード (UI/ロジック)
*   **Config**: `app.config.ts` で環境変数により分岐
    *   Flavor: Social -> App: 社会福祉士
    *   Flavor: Mental -> App: 精神保健福祉士
    *   Flavor: Care -> App: 介護福祉士

### 技術スタック
*   **App**: React Native (Expo SDK 50+)
*   **Lang**: TypeScript
*   **UI**: NativeWind (Tailwind CSS)
*   **DB**: Expo SQLite (Drizzle ORM推奨)
*   **IAP**: RevenueCat (課金管理)

## 3. データ構造とカテゴリ戦略
3858問（＋介護データ）を以下のカテゴリIDで管理し、各アプリへ自動分配します。

| グループID | 内容 | 解説タイプ | 収録アプリ |
| :--- | :--- | :--- | :--- |
| `past_social` | 社会福祉士 過去問(4年分) | AIリライト解説 | 社会 |
| `past_mental` | 精神保健福祉士 過去問(4年分) | AIリライト解説 | 精神 |
| `past_care` | 介護福祉士 過去問(5年分) | AIリライト解説 | 介護 |
| `common` | 共通科目 (予想問題) | AI完全オリジナル(事例化) | 社会 / 精神 / (一部)介護 |
| `spec_social` | 社会専門 (予想問題) | AI完全オリジナル(事例化) | 社会 |
| `spec_mental` | 精神専門 (予想問題) | AI完全オリジナル(事例化) | 精神 |
| `spec_care` | 介護専門 (予想問題) | AI完全オリジナル(事例化) | 介護 |

## 4. アプリ機能要件 (UXフロー)

### 4.1 オンボーディング（初回起動時）
*   **「ようこそ」画面**: ブランドロゴのアニメーション。
*   **保有資格インタビュー**:
    *   「現在お持ちの資格は？」（介護福祉士 / 社会福祉士 / なし 等）
    *   選択した資格は **「ゴールドバッジ」** としてホーム画面に永続表示。
*   **学習スタイル診断**: 通勤派？ 自宅派？ → 通知時間を自動設定。
*   **ペイウォール表示**: 診断結果に基づき、「あなたにおすすめの最短合格プラン(PRO)」を提案。

### 4.2 ホーム画面（コックピット）
*   **上部**: ユーザーカード（名前、保有資格バッジ、合格予定日）。
*   **中央**: 「本棚」UI。
    *   無料の過去問（鍵が開いている）。
    *   有料の予想問題（鍵がかかっている → タップで課金画面）。
*   **下部**: 「今日のクエスト」（AIが推奨する3問へのショートカット）。

### 4.3 学習プレイヤー
*   **出題**: 1問1答形式。
*   **文字サイズ**: 「あ/あ」ボタンで3段階変更可能（老眼対応）。
*   **解説**: AI生成の「口語体解説」。重要語句は太字/色付け。

### 4.4 マネタイズ (In-App Purchase)
*   **基本無料**: 直近1年分の過去問。
*   **PROパック (買い切り ¥1,500〜¥3,000)**:
    *   過去問残り全年度分。
    *   オリジナル予想問題（共通・専門）。
    *   広告非表示（実装する場合）。

## 5. 開発ロードマップ (確定版)
「まず1つを完璧にし、それをコピーして増やす」戦略です。

### Phase 1: データ・リファイナリーの構築 (Day 1 - 3)
*   **現状**: 3858問の生データあり。
*   **Action**: Pythonスクリプト `Knowledge Launderer` を完成させる。全データを処理し、著作権クリア済みの `master_database.json` を生成。
*   **並行作業**: 介護福祉士の過去問PDFを収集し、同プロセスでデータ化。

### Phase 2: 「社会福祉士版」プロトタイプ開発 (Day 4 - 14)
*   **Action**: Expoプロジェクト作成。オンボーディング 〜 ホーム 〜 プレイヤーのUI実装。SQLiteへのデータ読み込み実装。この時点で、自分のスマホで快適に問題が解ける状態にする。

### Phase 3: 課金実装とストア準備 (Day 15 - 25)
*   **Action**: RevenueCat導入。「鍵付きコンテンツ」のロック解除ロジック実装。アプリアイコン作成、スクリーンショット作成。

### Phase 4: 連続リリース (Day 26 - 45)
*   **Step 1**: 「社会福祉士版」をリリース。審査を通す。
*   **Step 2**: `app.config.ts` を書き換え、DBを差し替えて「精神保健福祉士版」をビルド＆申請。
*   **Step 3**: 介護データが整い次第、「介護福祉士版」をビルド＆申請。
